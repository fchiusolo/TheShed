{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "RealityCheck",
  "type": "object",
  "required": ["id", "place", "risk", "summary", "meta"],
  "properties": {
    "id": {
      "type": "string",
      "description": "Unique identifier for the reality check"
    },

    "place": {
      "type": "object",
      "required": ["name", "country", "type"],
      "properties": {
        "name": { "type": "string" },
        "city": { "type": "string" },
        "country": { "type": "string" },
        "type": {
          "type": "string",
          "enum": [
            "instagram_spot",
            "museum",
            "neighborhood",
            "natural_site",
            "other"
          ]
        }
      }
    },

    "risk": {
      "type": "object",
      "required": ["experience", "logistics"],
      "properties": {
        "experience": { "type": "string", "enum": ["low", "medium", "high"] },
        "logistics": { "type": "string", "enum": ["low", "medium", "high"] },
        "safety": {
          "type": "string",
          "enum": ["low", "medium", "high", "not_applicable"]
        }
      }
    },

    "summary": {
      "type": "object",
      "required": ["brutal", "confidence"],
      "properties": {
        "brutal": {
          "type": "string",
          "description": "Short, honest summary of what really matters"
        },
        "confidence": {
          "type": "string",
          "enum": ["high", "medium", "low"],
          "description": "How strong the underlying data is"
        }
      }
    },

    "sections": {
      "type": "object",
      "properties": {
        "real_value": { "$ref": "#/definitions/sectionBlock" },
        "context": { "$ref": "#/definitions/sectionBlock" },
        "hidden_costs": { "$ref": "#/definitions/sectionBlock" },
        "concrete_risks": { "$ref": "#/definitions/sectionBlock" }
      }
    },

    "fit": {
      "type": "object",
      "properties": {
        "not_for_you_if": {
          "type": "array",
          "items": { "type": "string" }
        },
        "good_choice_if": {
          "type": "array",
          "items": { "type": "string" }
        }
      }
    },

    "impact": {
      "type": "object",
      "properties": {
        "energy_required": {
          "type": "string",
          "enum": ["low", "medium", "high"]
        },
        "frustration_potential": {
          "type": "string",
          "enum": ["low", "medium", "high"]
        }
      }
    },

    "assumptions": {
      "type": "object",
      "properties": {
        "common_assumptions": {
          "type": "array",
          "items": { "type": "string" }
        },
        "when_assumptions_break": {
          "type": "array",
          "items": { "type": "string" }
        }
      }
    },

    "alternatives": {
      "type": "object",
      "properties": {
        "suggested": {
          "type": "array",
          "items": { "type": "string" }
        },
        "note": { "type": "string" }
      }
    },

    "closing": {
      "type": "object",
      "required": ["text"],
      "properties": {
        "text": { "type": "string" },
        "tone": {
          "type": "string",
          "enum": ["direct", "neutral"]
        }
      }
    },

    "meta": {
      "type": "object",
      "required": ["source_type", "review_volume", "last_updated"],
      "properties": {
        "source_type": {
          "type": "string",
          "enum": ["user_experience", "online_reviews", "mixed"]
        },
        "review_volume": {
          "type": "string",
          "enum": ["very_low", "low", "medium", "high"]
        },
        "last_updated": {
          "type": "string",
          "format": "date"
        }
      }
    }
  },

  "definitions": {
    "sectionBlock": {
      "type": "object",
      "required": ["points", "data_strength"],
      "properties": {
        "points": {
          "type": "array",
          "items": { "type": "string" }
        },
        "data_strength": {
          "type": "string",
          "enum": ["strong", "weak", "insufficient"]
        }
      }
    }
  }
}
